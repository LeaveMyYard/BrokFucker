{"version":3,"sources":["letter-a.png","constants.js","services/Auth.jsx","components/PrivateRoute.jsx","components/IndexPage.jsx","components/LoginPage.jsx","services/Translate.jsx","components/LotsList.jsx","services/Lots.jsx","components/LotsPage.jsx","components/VerificationLots.jsx","components/GuaranteeLots.jsx","components/ModeratorsPage.jsx","components/Sidebar.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","URL","localStorage","getItem","email","password","window","atob","userData","this","createAuthToken","btoa","authToken","fetch","method","headers","Authorization","response","json","result","ok","Error","msg","type","setItem","clear","PrivateRoute","children","rest","render","location","authService","isAuthenticated","to","pathname","state","from","IndexPage","props","Login","useState","setEmail","setPassword","history","useHistory","event","a","preventDefault","login","push","console","error","className","onSubmit","FormGroup","controlId","FormLabel","FormControl","autoFocus","value","onChange","e","target","Button","block","disabled","length","Translate","data","cash","cashless","any","every_month","term_end","other","LotsList","list","refreshList","onLotApprove","lot","getAuthToken","id","onLotRemove","map","item","date","givenDate","Date","replace","day","getDate","month","getMonth","year","getFullYear","dateFix","name","user","amount","currency","term","return_way","security","percentage","form","security_checked","guarantee_percentage","onClick","defaultProps","log","LotsPage","loading","setLoading","lots","setLots","lotsService","getLots","useEffect","VerificationPage","verificationLots","GuaranteePage","guaranteeLots","ModeratorsPage","errorMsg","setErrorMsg","handleMakeModerator","modermail","document","getElementById","alert","message","handleDeleteModerator","Spinner","size","animation","Sidebar","src","logo","alt","href","AuthService","logout","reload","exact","path","component","GuaranteeLots","VerificationLots","App","basename","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.33c57477.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAADUElEQVR4nO2cTUsbQRjHn2qE1Lz4QtGTEYyIBxVLjwq1xWuhH6F67zcomILfoPf2U+TcWiziqaVW9KChKoLQLRrdxLC7xjJhDbszY/7JZlYoPD/Yw87OS/zhPPvsZiYUMwUiuo3xWIz7D+hRShgW1AksCJBofbkjBojoabDBs2x2PJPofAi3XqcL11XKZf667vyZ4wQHKBPRd6ViF5gUNEtEn4MFr0ZGaC2fVyoi/jgOfbUsUIvoXan04cxxgkXfTAdunmIAFgRgQYBuYtAqEeXuTuYzmbHXo6OhCs+Hh5VGJnk5NERz6XSzx8rNzVjRsgrSEF/8IxLdClq4O0knEpECcjcIQUH2q9Vc0bLWNF1GFsRTDMCCACwI8Kj15Sar/tHk48zM7FQqlb07z/T20lwmozSUebu3Rz+urpTyICKTLnteqEzEGznmyFzX63RUq4VKt8rl46Jlncgfo92Mu90gnQsGZMFUKkULg4NKRcQv26bN83NQSyV4t7qPxz09NN3fH7r607Zzwbutz8A9XSjwFAOwIIBuig34D55NRBKYlp7KRcxBHNdqdCLFBPf2doeILkFTBZEEijwnWD6eTDamVSue9PXRdCoVqnHhujNnjuNJzTZ13eiC9JL8VF6YnIyUBL4/PKTCwYFc/CJi4iYy5FASuJ7PKzGnHdZKJdqtVOSaOhc8xRAsCMCCALogHQkRkD+dnoaa7tq2iDUbUn+/Iw6hxK2tcnnFz3MaiICMkslOMSZI3K00AXnDD64mUF5bFC1rOZgEiruVaUE8xQAsCMCCACwIwIIALAjAggAsCMCCACwIwIIALAhgcn2QjnH/DWVcZGPsu0Hcgt74x38LTzEACwKwIICxGDSWTDa+HjJBxfPo6Pq6457EK1fTGBOUSyaNLaBqd5XrQ8BTDMCCACwIwIIALAjAggAsCGAsD7r0PNqxbaU8CmIr1H612nFLsZhKLKoyiTFBQs7i9rZS/pCI7+bXJyaMjshTDMCCACwIEPcbRd0CKpOsaBaJGyVuQSYXUOlYjlsQTzEACwKwIAALArAgAAsCsCAAC4rAksFfjIozSSR/j5du3CiHFv4PArAgAAsC6B5WL3RbjyISdetTu4i97/inqpiYIKJ/H/T/fbHJO4kAAAAASUVORK5CYII=\"","export const URL = \"http://localhost:5000/api/v1/\";\r\n\r\nexport const BASE_HREF = \"/admin\";\r\n\r\nexport function encData() {\r\n  return (\r\n    window.btoa(localStorage.getItem(\"email\") + \":\") +\r\n    localStorage.getItem(\"password\")\r\n  );\r\n}\r\n","import { URL } from \"../constants\";\r\n\r\nclass AuthService {\r\n  isAuthenticated() {\r\n    return !!localStorage.getItem(\"email\");\r\n  }\r\n\r\n  getAuthToken() {\r\n    const email = localStorage.getItem(\"email\");\r\n    const password = window.atob(localStorage.getItem(\"password\"));\r\n    const userData = `${email}:${password}`;\r\n    const authToken = this.createAuthToken(userData);\r\n\r\n    return authToken;\r\n  }\r\n\r\n  createAuthToken(userData) {\r\n    return window.btoa(userData);\r\n  }\r\n\r\n  async login({ email, password }) {\r\n    const userData = `${email}:${password}`;\r\n    const authToken = this.createAuthToken(userData);\r\n\r\n    try {\r\n      const response = await fetch(URL + \"user\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Basic ${authToken}` },\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(result.msg);\r\n      }\r\n      if (result.type === \"admin\" || result.type === \"moderator\") {\r\n        localStorage.setItem(\"role\", result.type);\r\n        localStorage.setItem(\"email\", result.email);\r\n        localStorage.setItem(\"password\", window.btoa(password));\r\n      } else {\r\n        //error msg for users\r\n      }\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async logout() {\r\n    localStorage.clear();\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nimport authService from \"../services/Auth\";\r\n\r\nexport default function PrivateRoute({ children, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        authService.isAuthenticated() ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default function IndexPage(props) {\r\n  return <Redirect to=\"/dashboard\" />;\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\r\n\r\nimport \"../Login.css\";\r\nimport authService from \"../services/Auth\";\r\n\r\nexport default function Login(props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  if (authService.isAuthenticated()) {\r\n    return <Redirect to=\"/dashboard\" />;\r\n  }\r\n\r\n  function validateForm() {\r\n    return email.length > 0 && password.length > 7;\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      await authService.login({ email, password });\r\n      history.push(\"/dashboard/lots/unapproved\");\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"Login\">\r\n      <h1 className=\"login_heading\">Login</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <FormGroup controlId=\"email\">\r\n          <FormLabel>Email</FormLabel>\r\n          <FormControl\r\n            autoFocus\r\n            type=\"text\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </FormGroup>\r\n        <FormGroup controlId=\"password\">\r\n          <FormLabel>Password</FormLabel>\r\n          <FormControl\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            type=\"password\"\r\n          />\r\n        </FormGroup>\r\n        <Button\r\n          className=\"login-btn\"\r\n          block\r\n          disabled={!validateForm()}\r\n          type=\"submit\"\r\n        >\r\n          Login\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","export default function Translate(data) {\r\n  const vocabulary = {\r\n    cash: \"Наличные\",\r\n    cashless: \"Безналичные\",\r\n    any: \"Любой\",\r\n    every_month: \"Ежемесячно\",\r\n    term_end: \"Окончание срока\",\r\n    other: \"Другое\",\r\n  };\r\n\r\n  return vocabulary[data];\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport authService from \"../services/Auth\";\r\nimport Translate from \"../services/Translate\";\r\nimport { URL } from \"../constants\";\r\n\r\nfunction dateFix(date) {\r\n  let givenDate = new Date(date.replace(/ /g, \"T\"));\r\n  let day = givenDate.getDate();\r\n  let month = givenDate.getMonth();\r\n  let year = givenDate.getFullYear();\r\n  return `${day}.${month + 1}.${year}`;\r\n}\r\n\r\nexport function LotsList({ list, refreshList }) {\r\n  const onLotApprove = async (lot) => {\r\n    try {\r\n      const authToken = authService.getAuthToken();\r\n\r\n      const response = await fetch(URL + `lots/${lot.id}/approve`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          Authorization: `Basic ${authToken}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Unsuccessfull response\");\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n    } finally {\r\n      await refreshList();\r\n    }\r\n  };\r\n\r\n  const onLotRemove = async (lot) => {\r\n    try {\r\n      const authToken = authService.getAuthToken();\r\n\r\n      const response = await fetch(URL + `lots/unapproved/${lot.id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Authorization: `Basic ${authToken}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Unsuccessfull response\");\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n    } finally {\r\n      await refreshList();\r\n    }\r\n  };\r\n\r\n  return !list.length ? (\r\n    <h1>По данному запросу нет лотов.</h1>\r\n  ) : (\r\n    <table className=\"lot-table\" id=\"lotTable\">\r\n      <tr>\r\n        <th>Дата</th>\r\n        <th>Название лота</th>\r\n        <th>Имя</th>\r\n        <th>Сумма</th>\r\n        <th>Валюта</th>\r\n        <th>Срок, мес.</th>\r\n        <th>Метод погашения</th>\r\n        <th>Обеспечение</th>\r\n        <th>Ставка годовых</th>\r\n        <th>Форма кредитирования</th>\r\n        <th>Проверенное Обеспечение</th>\r\n        <th>Гарантия клуба</th>\r\n        <th>Подтвердить</th>\r\n      </tr>\r\n      {list.map((item) => (\r\n        <tr>\r\n          <td>{dateFix(item.date)}</td>\r\n          <td>{item.name}</td>\r\n          <td>{item.user}</td>\r\n          <td>{item.amount}</td>\r\n          <td>{item.currency}</td>\r\n          <td>{item.term}</td>\r\n          <td>{Translate(item.return_way)}</td>\r\n          <td>{item.security}</td>\r\n          <td>{item.percentage}</td>\r\n          <td>{Translate(item.form)}</td>\r\n          <td>{item.security_checked ? \"Да\" : \"Нет\"}</td>\r\n          <td>{item.guarantee_percentage}</td>\r\n          <td>\r\n            <button onClick={() => onLotApprove(item)}>Approve</button>\r\n            <button onClick={() => onLotRemove(item)}>Remove</button>\r\n          </td>\r\n        </tr>\r\n      ))}\r\n    </table>\r\n  );\r\n}\r\n\r\nLotsList.propTypes = {\r\n  list: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n};\r\n\r\nLotsList.defaultProps = {\r\n  list: [],\r\n};\r\n","import authService from \"./Auth\";\r\nimport { URL } from \"../constants\";\r\n\r\nclass LotsService {\r\n  async getLots() {\r\n    try {\r\n      const authToken = authService.getAuthToken();\r\n\r\n      const response = await fetch(URL + \"lots/unapproved\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Basic ${authToken}` },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Unsuccessfull response\");\r\n      }\r\n      console.log(response);\r\n      const result = await response.json();\r\n      return result;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async guaranteeLots() {\r\n    try {\r\n      const authToken = authService.getAuthToken();\r\n\r\n      const response = await fetch(URL + \"lots/requested/guarantee\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Basic ${authToken}` },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Unsuccessfull response\");\r\n      }\r\n      console.log(response);\r\n      const result = await response.json();\r\n      return result;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async verificationLots() {\r\n    try {\r\n      const authToken = authService.getAuthToken();\r\n\r\n      const response = await fetch(\r\n        URL + \"lots/requested/security_verification\",\r\n        {\r\n          method: \"GET\",\r\n          headers: { Authorization: `Basic ${authToken}` },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Unsuccessfull response\");\r\n      }\r\n      console.log(response);\r\n      const result = await response.json();\r\n      return result;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new LotsService();\r\n","import React, { useState, useEffect } from \"react\";\n\nimport { LotsList } from \"./LotsList\";\nimport lotsService from \"../services/Lots\";\n\nconst LotsPage = () => {\n  const [loading, setLoading] = useState(true);\n  const [lots, setLots] = useState();\n\n  const refreshList = async () => {\n    setLoading(true);\n\n    try {\n      const lots = await lotsService.getLots();\n      setLots(lots);\n    } catch (error) {\n      setLots();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  return (\n    <div className=\"lots-page\">\n      {loading ? (\n        <h1 className=\"heading\">Loading...</h1>\n      ) : (\n        <LotsList list={lots} refreshList={refreshList} />\n      )}\n    </div>\n  );\n};\n\nexport default LotsPage;\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { LotsList } from \"./LotsList\";\r\nimport lotsService from \"../services/Lots\";\r\n\r\nconst VerificationPage = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [lots, setLots] = useState();\r\n\r\n  const refreshList = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const lots = await lotsService.verificationLots();\r\n      setLots(lots);\r\n    } catch (error) {\r\n      setLots();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshList();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"lots-page\">\r\n      {loading ? (\r\n        <h1 className=\"heading\">Loading...</h1>\r\n      ) : (\r\n        <LotsList list={lots} refreshList={refreshList} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerificationPage;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { LotsList } from \"./LotsList\";\r\nimport lotsService from \"../services/Lots\";\r\n\r\nconst GuaranteePage = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [lots, setLots] = useState();\r\n\r\n  const refreshList = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const lots = await lotsService.guaranteeLots();\r\n      setLots(lots);\r\n    } catch (error) {\r\n      setLots();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshList();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"lots-page\">\r\n      {loading ? (\r\n        <h1 className=\"heading\">Loading...</h1>\r\n      ) : (\r\n        <LotsList list={lots} refreshList={refreshList} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GuaranteePage;\r\n","import React, { useState } from \"react\";\r\nimport { encData, URL } from \"../constants\";\r\nimport authService from \"../services/Auth\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\n\r\nconst ModeratorsPage = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  const authToken = authService.getAuthToken();\r\n\r\n  const handleMakeModerator = async () => {\r\n    const modermail = document.getElementById(\"modermail\").value;\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(URL + \"user/\" + modermail + \"/moderator\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Basic ${authToken}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        if (result.type === \"UserNotExists\") {\r\n          throw new Error(\"UserNotExists\");\r\n        } else throw new Error(\"Fetch fail\");\r\n      } else {\r\n        alert(\"Успешно!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      error.message === \"UserNotExists\"\r\n        ? setErrorMsg(\"Ошибка! Такого пользователя не существует.\")\r\n        : setErrorMsg(\"Ошибка! Проверьте подключение к интернету.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteModerator = async () => {\r\n    const modermail = document.getElementById(\"modermail\").value;\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(URL + \"user/\" + modermail + \"/moderator\", {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Authorization: `Basic ${authToken}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        if (result.type === \"UserNotExists\") {\r\n          throw new Error(\"UserNotExists\");\r\n        } else throw new Error(\"Fetch fail\");\r\n      } else {\r\n        alert(\"Успешно!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      error.message === \"UserNotExists\"\r\n        ? setErrorMsg(\"Ошибка! Такого пользователя не существует.\")\r\n        : setErrorMsg(\"Ошибка! Проверьте подключение к интернету.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"moderators-page_container\">\r\n      <h1 className=\"heading\">Модерирование</h1>\r\n      <h3>Введите почту пользователя в поле ниже и выберите действие.</h3>\r\n      <input className=\"form-control mt-4\" id=\"modermail\" type=\"email\"></input>\r\n      <div className=\"moderators-page_btns\">\r\n        <button\r\n          className=\"btn btn-primary moderator-btn\"\r\n          id=\"makeModerator\"\r\n          onClick={handleMakeModerator}\r\n        >\r\n          {loading ? (\r\n            <Spinner size=\"sm\" animation=\"border\" />\r\n          ) : (\r\n            \"СДЕЛАТЬ МОДЕРАТОРОМ\"\r\n          )}\r\n        </button>\r\n        <button\r\n          className=\"btn btn-primary moderator-btn ml-1\"\r\n          id=\"deleteModerator\"\r\n          onClick={handleDeleteModerator}\r\n        >\r\n          {loading ? (\r\n            <Spinner size=\"sm\" animation=\"border\" />\r\n          ) : (\r\n            \"УБРАТЬ ПОЛНОМОЧИЯ\"\r\n          )}\r\n        </button>\r\n      </div>\r\n      {errorMsg && <p className=\"errorMsg\">{errorMsg}</p>}\r\n    </div>\r\n  );\r\n};\r\nexport default ModeratorsPage;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport LotsPage from \"./LotsPage\";\r\nimport VerificationLots from \"./VerificationLots\";\r\nimport GuaranteeLots from \"./GuaranteeLots\";\r\nimport ModeratorsPage from \"./ModeratorsPage\";\r\nimport AuthService from \"../services/Auth\";\r\nimport \"../Admin.css\";\r\nimport logo from \"../letter-a.png\";\r\n/**\r\n * TODO: restruct all `Route`s and `history` usage as following\r\n * https://reacttraining.com/react-router/web/example/nesting\r\n */\r\n\r\nconst Sidebar = (props) => {\r\n  const handleLogout = () => {\r\n    AuthService.logout();\r\n    window.location.reload();\r\n  };\r\n  const user = localStorage.getItem(\"role\");\r\n\r\n  return user === \"admin\" ? (\r\n    <Router>\r\n      <div className=\"sidebar_container\">\r\n        <div className=\"sidebar\">\r\n          <div className=\"sidebar-header\">\r\n            <img className=\"sidebar__logo\" src={logo} alt=\"BrokAdmin\"></img>\r\n          </div>\r\n          <Link to=\"/admin/dashboard/lots/unapproved\">Лоты</Link>\r\n          <Link to=\"/admin/dashboard/moderators\">Модераторы</Link>\r\n          <Link to=\"/admin/dashboard/guarantee\">Гарантия</Link>\r\n          <Link to=\"/admin/dashboard/verification\">Обеспечение</Link>\r\n          <a href=\"-1\" onClick={handleLogout}>\r\n            Выйти\r\n          </a>\r\n        </div>\r\n        <Switch>\r\n          <Route\r\n            exact\r\n            path=\"/admin/dashboard/lots/unapproved\"\r\n            component={LotsPage}\r\n          ></Route>\r\n          <Route\r\n            path=\"/admin/dashboard/moderators\"\r\n            component={ModeratorsPage}\r\n          ></Route>\r\n          <Route\r\n            path=\"/admin/dashboard/guarantee\"\r\n            component={GuaranteeLots}\r\n          ></Route>\r\n          <Route\r\n            path=\"/admin/dashboard/verification\"\r\n            component={VerificationLots}\r\n          ></Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  ) : (\r\n    <Router>\r\n      <div className=\"sidebar_container\">\r\n        <div className=\"sidebar\">\r\n          <div className=\"sidebar-header\">\r\n            <img className=\"sidebar__logo\" src={logo} alt=\"BrokAdmin\"></img>\r\n          </div>\r\n          <Link to=\"/admin/dashboard/lots/unapproved\">Лоты</Link>\r\n        </div>\r\n        <Switch>\r\n          <Route\r\n            exact\r\n            path=\"/admin/dashboard/lots/unapproved\"\r\n            component={LotsPage}\r\n          ></Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\nimport {\r\n  BrowserRouter,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\n\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport IndexPage from \"./components/IndexPage\";\r\nimport LoginPage from \"./components/LoginPage\";\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport LotsPage from \"./components/LotsPage\";\r\nimport { BASE_HREF } from \"./constants\";\r\n\r\n// TODO: in Auth change 'user' to 'admin' when ready\r\n// TODO: change 'user' to 'admin' in Sidebar return\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter basename={BASE_HREF}>\r\n      <Switch>\r\n        <PrivateRoute path=\"/dashboard\">\r\n          <Sidebar />\r\n        </PrivateRoute>\r\n        <Route exact path=\"/login\">\r\n          <LoginPage />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <IndexPage />\r\n        </Route>\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}